{"ast":null,"code":"import React,{createContext,useContext,useReducer,useEffect,useCallback}from'react';import{authAPI,clearTokens}from'../services/api';// Create the Auth Context\nimport{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();// Auth action types\nconst AUTH_ACTIONS={INIT_START:'INIT_START',INIT_SUCCESS:'INIT_SUCCESS',INIT_ERROR:'INIT_ERROR',LOGIN_START:'LOGIN_START',LOGIN_SUCCESS:'LOGIN_SUCCESS',LOGIN_ERROR:'LOGIN_ERROR',LOGOUT_START:'LOGOUT_START',LOGOUT_SUCCESS:'LOGOUT_SUCCESS',LOGOUT_ERROR:'LOGOUT_ERROR',LINK_ROOMMATE_START:'LINK_ROOMMATE_START',LINK_ROOMMATE_SUCCESS:'LINK_ROOMMATE_SUCCESS',LINK_ROOMMATE_ERROR:'LINK_ROOMMATE_ERROR',REFRESH_USER:'REFRESH_USER',CLEAR_ERROR:'CLEAR_ERROR'};// Initial auth state\nconst initialState={user:null,isAuthenticated:false,isLoading:true,isInitialized:false,needsRoommateLink:false,error:null,authStatus:null};// Auth reducer\nfunction authReducer(state,action){switch(action.type){case AUTH_ACTIONS.INIT_START:return{...state,isLoading:true,error:null};case AUTH_ACTIONS.INIT_SUCCESS:return{...state,isLoading:false,isInitialized:true,authStatus:action.payload.authStatus,user:action.payload.user,isAuthenticated:!!action.payload.user,needsRoommateLink:action.payload.user&&!action.payload.user.roommate};case AUTH_ACTIONS.INIT_ERROR:return{...state,isLoading:false,isInitialized:true,error:action.payload,user:null,isAuthenticated:false};case AUTH_ACTIONS.LOGIN_START:return{...state,isLoading:true,error:null};case AUTH_ACTIONS.LOGIN_SUCCESS:return{...state,isLoading:false,user:action.payload.user,isAuthenticated:true,needsRoommateLink:action.payload.needsRoommateLink||false,error:null};case AUTH_ACTIONS.LOGIN_ERROR:return{...state,isLoading:false,error:action.payload,user:null,isAuthenticated:false};case AUTH_ACTIONS.LOGOUT_START:return{...state,isLoading:true,error:null};case AUTH_ACTIONS.LOGOUT_SUCCESS:return{...state,isLoading:false,user:null,isAuthenticated:false,needsRoommateLink:false,error:null};case AUTH_ACTIONS.LOGOUT_ERROR:return{...state,isLoading:false,error:action.payload};case AUTH_ACTIONS.LINK_ROOMMATE_START:return{...state,isLoading:true,error:null};case AUTH_ACTIONS.LINK_ROOMMATE_SUCCESS:return{...state,isLoading:false,user:action.payload.user,needsRoommateLink:false,error:null};case AUTH_ACTIONS.LINK_ROOMMATE_ERROR:return{...state,isLoading:false,error:action.payload};case AUTH_ACTIONS.REFRESH_USER:return{...state,user:action.payload.user,isAuthenticated:!!action.payload.user,needsRoommateLink:action.payload.user&&!action.payload.user.roommate};case AUTH_ACTIONS.CLEAR_ERROR:return{...state,error:null};default:return state;}}// Auth Provider Component\nexport function AuthProvider(_ref){let{children}=_ref;const[state,dispatch]=useReducer(authReducer,initialState);// Initialize authentication state\nuseEffect(()=>{const initializeAuth=async()=>{dispatch({type:AUTH_ACTIONS.INIT_START});try{// Check if we have OAuth callback parameters in the URL\nconst urlParams=new URLSearchParams(window.location.search);const authStatus=urlParams.get('auth');const needsLinking=urlParams.get('needs_linking');const errorMessage=urlParams.get('message');if(authStatus==='success'){// Handle successful OAuth callback\ntry{const profileResponse=await authAPI.getProfile();const user=profileResponse.data.user;dispatch({type:AUTH_ACTIONS.LOGIN_SUCCESS,payload:{user,needsRoommateLink:needsLinking==='true'}});// Clean up URL parameters\nconst cleanUrl=window.location.pathname;window.history.replaceState({},document.title,cleanUrl);return;}catch(profileError){console.error('Failed to get user profile after OAuth:',profileError);dispatch({type:AUTH_ACTIONS.LOGIN_ERROR,payload:'Failed to get user profile after authentication'});return;}}else if(authStatus==='error'){// Handle OAuth error callback\ndispatch({type:AUTH_ACTIONS.LOGIN_ERROR,payload:errorMessage||'Authentication failed'});// Clean up URL parameters\nconst cleanUrl=window.location.pathname;window.history.replaceState({},document.title,cleanUrl);return;}// Normal initialization (no OAuth callback)\n// Get auth service status\nconst statusResponse=await authAPI.getStatus();const authServiceStatus=statusResponse.data;// Try to get current user profile\nlet user=null;try{const profileResponse=await authAPI.getProfile();user=profileResponse.data.user;}catch(profileError){var _profileError$respons,_profileError$respons2;// User not authenticated, which is fine\nconsole.log('User not authenticated:',(_profileError$respons=profileError.response)===null||_profileError$respons===void 0?void 0:(_profileError$respons2=_profileError$respons.data)===null||_profileError$respons2===void 0?void 0:_profileError$respons2.error);}dispatch({type:AUTH_ACTIONS.INIT_SUCCESS,payload:{authStatus:authServiceStatus,user}});}catch(error){var _error$response,_error$response$data;console.error('Failed to initialize auth:',error);dispatch({type:AUTH_ACTIONS.INIT_ERROR,payload:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to initialize authentication'});}};initializeAuth();},[]);// Login with Google\nconst loginWithGoogle=useCallback(async()=>{dispatch({type:AUTH_ACTIONS.LOGIN_START});try{// Construct the redirect URI based on current host\nconst redirectUri=`${window.location.protocol}//${window.location.host.replace(':3000',':5002')}/api/auth/callback`;// Get the OAuth URL\nconst response=await authAPI.initiateGoogleLogin(redirectUri);const{auth_url}=response.data;// Redirect to Google OAuth\nwindow.location.href=auth_url;}catch(error){var _error$response2,_error$response2$data;console.error('Login failed:',error);dispatch({type:AUTH_ACTIONS.LOGIN_ERROR,payload:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Login failed'});}},[]);// Handle OAuth callback (called when user returns from Google)\nconst handleOAuthCallback=useCallback(async(user,needsRoommateLink)=>{dispatch({type:AUTH_ACTIONS.LOGIN_SUCCESS,payload:{user,needsRoommateLink}});},[]);// Link user to roommate\nconst linkRoommate=useCallback(async roommateId=>{dispatch({type:AUTH_ACTIONS.LINK_ROOMMATE_START});try{const response=await authAPI.linkRoommate(roommateId);const user=response.data.user;dispatch({type:AUTH_ACTIONS.LINK_ROOMMATE_SUCCESS,payload:{user}});return{success:true,user};}catch(error){var _error$response3,_error$response3$data;console.error('Failed to link roommate:',error);const errorMessage=((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Failed to link roommate';dispatch({type:AUTH_ACTIONS.LINK_ROOMMATE_ERROR,payload:errorMessage});return{success:false,error:errorMessage};}},[]);// Unlink roommate\nconst unlinkRoommate=useCallback(async()=>{try{const response=await authAPI.unlinkRoommate();const user=response.data.user;dispatch({type:AUTH_ACTIONS.REFRESH_USER,payload:{user}});return{success:true,user};}catch(error){var _error$response4,_error$response4$data;console.error('Failed to unlink roommate:',error);return{success:false,error:((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Failed to unlink roommate'};}},[]);// Refresh user session\nconst refreshUser=useCallback(async()=>{try{const response=await authAPI.refreshSession();const user=response.data.user;dispatch({type:AUTH_ACTIONS.REFRESH_USER,payload:{user}});return{success:true,user};}catch(error){var _error$response5,_error$response5$data;console.error('Failed to refresh user:',error);// If refresh fails, user might need to re-authenticate\ndispatch({type:AUTH_ACTIONS.LOGOUT_SUCCESS});return{success:false,error:((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'Session expired'};}},[]);// Logout\nconst logout=useCallback(async()=>{dispatch({type:AUTH_ACTIONS.LOGOUT_START});try{await authAPI.logout();clearTokens();// Clear CSRF tokens\ndispatch({type:AUTH_ACTIONS.LOGOUT_SUCCESS});return{success:true};}catch(error){var _error$response6,_error$response6$data,_error$response7,_error$response7$data;console.error('Logout failed:',error);clearTokens();// Clear tokens even on error\ndispatch({type:AUTH_ACTIONS.LOGOUT_ERROR,payload:((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||'Logout failed'});return{success:false,error:((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||'Logout failed'};}},[]);// Revoke access and logout\nconst revokeAccess=useCallback(async()=>{dispatch({type:AUTH_ACTIONS.LOGOUT_START});try{await authAPI.revokeAccess();dispatch({type:AUTH_ACTIONS.LOGOUT_SUCCESS});return{success:true};}catch(error){var _error$response8,_error$response8$data,_error$response9,_error$response9$data;console.error('Revoke access failed:',error);dispatch({type:AUTH_ACTIONS.LOGOUT_ERROR,payload:((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.error)||'Failed to revoke access'});return{success:false,error:((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.error)||'Failed to revoke access'};}},[]);// Clear error\nconst clearError=useCallback(()=>{dispatch({type:AUTH_ACTIONS.CLEAR_ERROR});},[]);// Context value\nconst value={// State\n...state,// Actions\nloginWithGoogle,handleOAuthCallback,linkRoommate,unlinkRoommate,refreshUser,logout,revokeAccess,clearError,// Computed values\nhasRoommate:state.user&&state.user.roommate,isConfigured:state.authStatus&&state.authStatus.credentials_configured};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});}// Custom hook to use auth context\nexport function useAuth(){const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;}// HOC to wrap components that require authentication\nexport function withAuth(Component){return function AuthenticatedComponent(props){const{isAuthenticated,isLoading}=useAuth();if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});}if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"Authentication required\"});}return/*#__PURE__*/_jsx(Component,{...props});};}// HOC to wrap components that require roommate linking\nexport function withRoommate(Component){return function RoommateLinkedComponent(props){const{isAuthenticated,hasRoommate,isLoading}=useAuth();if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});}if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"Authentication required\"});}if(!hasRoommate){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"Roommate linking required\"});}return/*#__PURE__*/_jsx(Component,{...props});};}","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","useCallback","authAPI","clearTokens","jsx","_jsx","AuthContext","AUTH_ACTIONS","INIT_START","INIT_SUCCESS","INIT_ERROR","LOGIN_START","LOGIN_SUCCESS","LOGIN_ERROR","LOGOUT_START","LOGOUT_SUCCESS","LOGOUT_ERROR","LINK_ROOMMATE_START","LINK_ROOMMATE_SUCCESS","LINK_ROOMMATE_ERROR","REFRESH_USER","CLEAR_ERROR","initialState","user","isAuthenticated","isLoading","isInitialized","needsRoommateLink","error","authStatus","authReducer","state","action","type","payload","roommate","AuthProvider","_ref","children","dispatch","initializeAuth","urlParams","URLSearchParams","window","location","search","get","needsLinking","errorMessage","profileResponse","getProfile","data","cleanUrl","pathname","history","replaceState","document","title","profileError","console","statusResponse","getStatus","authServiceStatus","_profileError$respons","_profileError$respons2","log","response","_error$response","_error$response$data","loginWithGoogle","redirectUri","protocol","host","replace","initiateGoogleLogin","auth_url","href","_error$response2","_error$response2$data","handleOAuthCallback","linkRoommate","roommateId","success","_error$response3","_error$response3$data","unlinkRoommate","_error$response4","_error$response4$data","refreshUser","refreshSession","_error$response5","_error$response5$data","logout","_error$response6","_error$response6$data","_error$response7","_error$response7$data","revokeAccess","_error$response8","_error$response8$data","_error$response9","_error$response9$data","clearError","value","hasRoommate","isConfigured","credentials_configured","Provider","useAuth","context","Error","withAuth","Component","AuthenticatedComponent","props","className","withRoommate","RoommateLinkedComponent"],"sources":["/Users/angel/Desktop/vscode python/vscode python/MISC/Chores/frontend/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect, useCallback } from 'react';\nimport { authAPI, clearTokens } from '../services/api';\n\n// Create the Auth Context\nconst AuthContext = createContext();\n\n// Auth action types\nconst AUTH_ACTIONS = {\n  INIT_START: 'INIT_START',\n  INIT_SUCCESS: 'INIT_SUCCESS',\n  INIT_ERROR: 'INIT_ERROR',\n  LOGIN_START: 'LOGIN_START',\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\n  LOGIN_ERROR: 'LOGIN_ERROR',\n  LOGOUT_START: 'LOGOUT_START',\n  LOGOUT_SUCCESS: 'LOGOUT_SUCCESS',\n  LOGOUT_ERROR: 'LOGOUT_ERROR',\n  LINK_ROOMMATE_START: 'LINK_ROOMMATE_START',\n  LINK_ROOMMATE_SUCCESS: 'LINK_ROOMMATE_SUCCESS',\n  LINK_ROOMMATE_ERROR: 'LINK_ROOMMATE_ERROR',\n  REFRESH_USER: 'REFRESH_USER',\n  CLEAR_ERROR: 'CLEAR_ERROR'\n};\n\n// Initial auth state\nconst initialState = {\n  user: null,\n  isAuthenticated: false,\n  isLoading: true,\n  isInitialized: false,\n  needsRoommateLink: false,\n  error: null,\n  authStatus: null\n};\n\n// Auth reducer\nfunction authReducer(state, action) {\n  switch (action.type) {\n    case AUTH_ACTIONS.INIT_START:\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.INIT_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        isInitialized: true,\n        authStatus: action.payload.authStatus,\n        user: action.payload.user,\n        isAuthenticated: !!action.payload.user,\n        needsRoommateLink: action.payload.user && !action.payload.user.roommate\n      };\n    \n    case AUTH_ACTIONS.INIT_ERROR:\n      return {\n        ...state,\n        isLoading: false,\n        isInitialized: true,\n        error: action.payload,\n        user: null,\n        isAuthenticated: false\n      };\n    \n    case AUTH_ACTIONS.LOGIN_START:\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.LOGIN_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        user: action.payload.user,\n        isAuthenticated: true,\n        needsRoommateLink: action.payload.needsRoommateLink || false,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.LOGIN_ERROR:\n      return {\n        ...state,\n        isLoading: false,\n        error: action.payload,\n        user: null,\n        isAuthenticated: false\n      };\n    \n    case AUTH_ACTIONS.LOGOUT_START:\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.LOGOUT_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        user: null,\n        isAuthenticated: false,\n        needsRoommateLink: false,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.LOGOUT_ERROR:\n      return {\n        ...state,\n        isLoading: false,\n        error: action.payload\n      };\n    \n    case AUTH_ACTIONS.LINK_ROOMMATE_START:\n      return {\n        ...state,\n        isLoading: true,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.LINK_ROOMMATE_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        user: action.payload.user,\n        needsRoommateLink: false,\n        error: null\n      };\n    \n    case AUTH_ACTIONS.LINK_ROOMMATE_ERROR:\n      return {\n        ...state,\n        isLoading: false,\n        error: action.payload\n      };\n    \n    case AUTH_ACTIONS.REFRESH_USER:\n      return {\n        ...state,\n        user: action.payload.user,\n        isAuthenticated: !!action.payload.user,\n        needsRoommateLink: action.payload.user && !action.payload.user.roommate\n      };\n    \n    case AUTH_ACTIONS.CLEAR_ERROR:\n      return {\n        ...state,\n        error: null\n      };\n    \n    default:\n      return state;\n  }\n}\n\n// Auth Provider Component\nexport function AuthProvider({ children }) {\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  // Initialize authentication state\n  useEffect(() => {\n    const initializeAuth = async () => {\n      dispatch({ type: AUTH_ACTIONS.INIT_START });\n      \n      try {\n        // Check if we have OAuth callback parameters in the URL\n        const urlParams = new URLSearchParams(window.location.search);\n        const authStatus = urlParams.get('auth');\n        const needsLinking = urlParams.get('needs_linking');\n        const errorMessage = urlParams.get('message');\n        \n        if (authStatus === 'success') {\n          // Handle successful OAuth callback\n          try {\n            const profileResponse = await authAPI.getProfile();\n            const user = profileResponse.data.user;\n            \n            dispatch({\n              type: AUTH_ACTIONS.LOGIN_SUCCESS,\n              payload: { \n                user, \n                needsRoommateLink: needsLinking === 'true' \n              }\n            });\n            \n            // Clean up URL parameters\n            const cleanUrl = window.location.pathname;\n            window.history.replaceState({}, document.title, cleanUrl);\n            return;\n          } catch (profileError) {\n            console.error('Failed to get user profile after OAuth:', profileError);\n            dispatch({\n              type: AUTH_ACTIONS.LOGIN_ERROR,\n              payload: 'Failed to get user profile after authentication'\n            });\n            return;\n          }\n        } else if (authStatus === 'error') {\n          // Handle OAuth error callback\n          dispatch({\n            type: AUTH_ACTIONS.LOGIN_ERROR,\n            payload: errorMessage || 'Authentication failed'\n          });\n          \n          // Clean up URL parameters\n          const cleanUrl = window.location.pathname;\n          window.history.replaceState({}, document.title, cleanUrl);\n          return;\n        }\n        \n        // Normal initialization (no OAuth callback)\n        // Get auth service status\n        const statusResponse = await authAPI.getStatus();\n        const authServiceStatus = statusResponse.data;\n        \n        // Try to get current user profile\n        let user = null;\n        try {\n          const profileResponse = await authAPI.getProfile();\n          user = profileResponse.data.user;\n        } catch (profileError) {\n          // User not authenticated, which is fine\n          console.log('User not authenticated:', profileError.response?.data?.error);\n        }\n        \n        dispatch({\n          type: AUTH_ACTIONS.INIT_SUCCESS,\n          payload: { authStatus: authServiceStatus, user }\n        });\n      } catch (error) {\n        console.error('Failed to initialize auth:', error);\n        dispatch({\n          type: AUTH_ACTIONS.INIT_ERROR,\n          payload: error.response?.data?.error || 'Failed to initialize authentication'\n        });\n      }\n    };\n\n    initializeAuth();\n  }, []);\n\n  // Login with Google\n  const loginWithGoogle = useCallback(async () => {\n    dispatch({ type: AUTH_ACTIONS.LOGIN_START });\n    \n    try {\n      // Construct the redirect URI based on current host\n      const redirectUri = `${window.location.protocol}//${window.location.host.replace(':3000', ':5002')}/api/auth/callback`;\n      \n      // Get the OAuth URL\n      const response = await authAPI.initiateGoogleLogin(redirectUri);\n      const { auth_url } = response.data;\n      \n      // Redirect to Google OAuth\n      window.location.href = auth_url;\n      \n    } catch (error) {\n      console.error('Login failed:', error);\n      dispatch({\n        type: AUTH_ACTIONS.LOGIN_ERROR,\n        payload: error.response?.data?.error || 'Login failed'\n      });\n    }\n  }, []);\n\n  // Handle OAuth callback (called when user returns from Google)\n  const handleOAuthCallback = useCallback(async (user, needsRoommateLink) => {\n    dispatch({\n      type: AUTH_ACTIONS.LOGIN_SUCCESS,\n      payload: { user, needsRoommateLink }\n    });\n  }, []);\n\n  // Link user to roommate\n  const linkRoommate = useCallback(async (roommateId) => {\n    dispatch({ type: AUTH_ACTIONS.LINK_ROOMMATE_START });\n    \n    try {\n      const response = await authAPI.linkRoommate(roommateId);\n      const user = response.data.user;\n      \n      dispatch({\n        type: AUTH_ACTIONS.LINK_ROOMMATE_SUCCESS,\n        payload: { user }\n      });\n      \n      return { success: true, user };\n    } catch (error) {\n      console.error('Failed to link roommate:', error);\n      const errorMessage = error.response?.data?.error || 'Failed to link roommate';\n      dispatch({\n        type: AUTH_ACTIONS.LINK_ROOMMATE_ERROR,\n        payload: errorMessage\n      });\n      return { success: false, error: errorMessage };\n    }\n  }, []);\n\n  // Unlink roommate\n  const unlinkRoommate = useCallback(async () => {\n    try {\n      const response = await authAPI.unlinkRoommate();\n      const user = response.data.user;\n      \n      dispatch({\n        type: AUTH_ACTIONS.REFRESH_USER,\n        payload: { user }\n      });\n      \n      return { success: true, user };\n    } catch (error) {\n      console.error('Failed to unlink roommate:', error);\n      return { success: false, error: error.response?.data?.error || 'Failed to unlink roommate' };\n    }\n  }, []);\n\n  // Refresh user session\n  const refreshUser = useCallback(async () => {\n    try {\n      const response = await authAPI.refreshSession();\n      const user = response.data.user;\n      \n      dispatch({\n        type: AUTH_ACTIONS.REFRESH_USER,\n        payload: { user }\n      });\n      \n      return { success: true, user };\n    } catch (error) {\n      console.error('Failed to refresh user:', error);\n      // If refresh fails, user might need to re-authenticate\n      dispatch({ type: AUTH_ACTIONS.LOGOUT_SUCCESS });\n      return { success: false, error: error.response?.data?.error || 'Session expired' };\n    }\n  }, []);\n\n  // Logout\n  const logout = useCallback(async () => {\n    dispatch({ type: AUTH_ACTIONS.LOGOUT_START });\n    \n    try {\n      await authAPI.logout();\n      clearTokens(); // Clear CSRF tokens\n      dispatch({ type: AUTH_ACTIONS.LOGOUT_SUCCESS });\n      return { success: true };\n    } catch (error) {\n      console.error('Logout failed:', error);\n      clearTokens(); // Clear tokens even on error\n      dispatch({\n        type: AUTH_ACTIONS.LOGOUT_ERROR,\n        payload: error.response?.data?.error || 'Logout failed'\n      });\n      return { success: false, error: error.response?.data?.error || 'Logout failed' };\n    }\n  }, []);\n\n  // Revoke access and logout\n  const revokeAccess = useCallback(async () => {\n    dispatch({ type: AUTH_ACTIONS.LOGOUT_START });\n    \n    try {\n      await authAPI.revokeAccess();\n      dispatch({ type: AUTH_ACTIONS.LOGOUT_SUCCESS });\n      return { success: true };\n    } catch (error) {\n      console.error('Revoke access failed:', error);\n      dispatch({\n        type: AUTH_ACTIONS.LOGOUT_ERROR,\n        payload: error.response?.data?.error || 'Failed to revoke access'\n      });\n      return { success: false, error: error.response?.data?.error || 'Failed to revoke access' };\n    }\n  }, []);\n\n  // Clear error\n  const clearError = useCallback(() => {\n    dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\n  }, []);\n\n  // Context value\n  const value = {\n    // State\n    ...state,\n    \n    // Actions\n    loginWithGoogle,\n    handleOAuthCallback,\n    linkRoommate,\n    unlinkRoommate,\n    refreshUser,\n    logout,\n    revokeAccess,\n    clearError,\n    \n    // Computed values\n    hasRoommate: state.user && state.user.roommate,\n    isConfigured: state.authStatus && state.authStatus.credentials_configured\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\n// Custom hook to use auth context\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n\n// HOC to wrap components that require authentication\nexport function withAuth(Component) {\n  return function AuthenticatedComponent(props) {\n    const { isAuthenticated, isLoading } = useAuth();\n    \n    if (isLoading) {\n      return <div className=\"loading\">Loading...</div>;\n    }\n    \n    if (!isAuthenticated) {\n      return <div className=\"error\">Authentication required</div>;\n    }\n    \n    return <Component {...props} />;\n  };\n}\n\n// HOC to wrap components that require roommate linking\nexport function withRoommate(Component) {\n  return function RoommateLinkedComponent(props) {\n    const { isAuthenticated, hasRoommate, isLoading } = useAuth();\n    \n    if (isLoading) {\n      return <div className=\"loading\">Loading...</div>;\n    }\n    \n    if (!isAuthenticated) {\n      return <div className=\"error\">Authentication required</div>;\n    }\n    \n    if (!hasRoommate) {\n      return <div className=\"error\">Roommate linking required</div>;\n    }\n    \n    return <Component {...props} />;\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}